{
  "hash": "488fc77c678b705749ed55ad6ab70f3d",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: Linear regression\nsubtitle: Lecture 15\nformat:\n  revealjs: default\neditor_options:\n  chunk_output_type: console\nexecute:\n  warning: false\n  error: false\n---\n\n## Setup {.smaller}\n\n::: {#ce4c6f26 .cell message='false' execution_count=1}\n``` {.python .cell-code}\nimport matplotlib.pyplot as plt\nfrom matplotlib.patches import Ellipse\nimport pandas as pd\nimport seaborn as sns\nfrom sklearn.linear_model import LinearRegression\nimport numpy as np\nfrom great_tables import GT, style, loc, exibble\n\n# Setting the theme for plots\nsns.set_theme(style=\"whitegrid\", font_scale=1.2)\n```\n:::\n\n\n## Goals\n\n::: incremental\n-   What is a model?\n-   Why do we model?\n-   What is correlation?\n:::\n\n# Prediction / classification\n\n## Let's drive a Tesla!\n\n\n{{< video https://www.youtube.com/embed/xvqQ4F7Yf2o start=\"150\" width=\"900\" height=\"600\" >}}\n\n\n\n## Semi or garage? {.smaller}\n\n> i love how Tesla thinks the wall in my garage is a semi.\n> üòÖ\n\n![](images/tesla-get-wrong-1.png){fig-align=\"center\" width=\"300\"}\n\n::: aside\nSource: [Reddit](https://www.reddit.com/r/TeslaModelY/comments/vjcpte/i_love_how_tesla_thinks_the_wall_in_my_garage_is/)\n:::\n\n## Semi or garage? {.smaller}\n\n> New owner here.\n> Just parked in my garage.\n> Tesla thinks I crashed onto a semi.\n\n![](images/tesla-get-wrong-2.png){fig-align=\"center\" width=\"300\"}\n\n::: aside\nSource: [Reddit](https://www.reddit.com/r/TeslaModelY/comments/112520t/new_owner_here_just_parked_in_my_garage_tesla/)\n:::\n\n## Car or trash?\n\n> Tesla calls Mercedes trash\n\n![](images/tesla-get-wrong-3.png){fig-align=\"center\" width=\"500\"}\n\n::: aside\nSource: [Reddit](https://www.reddit.com/r/FUCKYOUINPARTICULAR/comments/hi5srx/tesla_calls_mercedes_trash/)\n:::\n\n# Description\n\n## Leisure, commute, physical activity and BP {.smaller}\n\n> [Relation Between Leisure Time, Commuting, and Occupational Physical Activity With Blood Pressure in 125,402 Adults: The Lifelines Cohort](https://www.ahajournals.org/doi/full/10.1161/JAHA.119.014313)\n>\n> Byambasukh, Oyuntugs, Harold Snieder, and Eva Corpeleijn.\n> \"Relation between leisure time, commuting, and occupational physical activity with blood pressure in 125 402 adults: the lifelines cohort.\" *Journal of the American Heart Association* 9.4 (2020): e014313.\n\n## Leisure, commute, physical activity and BP {.smaller .scrollable}\n\n**Background:** Whether all domains of daily‚Äêlife moderate‚Äêto‚Äêvigorous physical activity (MVPA) are associated with lower blood pressure (BP) and how this association depends on age and body mass index remains unclear.\n\n**Methods and Results:** In the population‚Äêbased Lifelines cohort (N=125,402), MVPA was assessed by the Short Questionnaire to Assess Health‚ÄêEnhancing Physical Activity, a validated questionnaire in different domains such as commuting, leisure‚Äêtime, and occupational PA.\nBP was assessed using the last 3 of 10 measurements after 10¬†minutes‚Äô rest in the supine position.\nHypertension was defined as systolic BP ‚â•140¬†mm¬†Hg and/or diastolic BP ‚â•90¬†mm¬†Hg and/or use of antihypertensives.\nIn regression analysis, higher commuting and leisure‚Äêtime but not occupational MVPA related to lower BP and lower hypertension risk.\nCommuting‚Äêand‚Äêleisure‚Äêtime MVPA was associated with BP in a dose‚Äêdependent manner.\nŒ≤ Coefficients (95% CI) from linear regression analyses were ‚àí1.64 (‚àí2.03 to ‚àí1.24), ‚àí2.29 (‚àí2.68 to ‚àí1.90), and finally ‚àí2.90 (‚àí3.29 to ‚àí2.50) mm¬†Hg systolic BP for the low, middle, and highest tertile of MVPA compared with ‚ÄúNo MVPA‚Äù as the reference group after adjusting for age, sex, education, smoking and alcohol use.\nFurther adjustment for body mass index attenuated the associations by 30% to 50%, but more MVPA remained significantly associated with lower BP and lower risk of hypertension.\nThis association was age dependent.\nŒ≤ Coefficients (95% CI) for the highest tertiles of commuting‚Äêand‚Äêleisure‚Äêtime MVPA were ‚àí1.67 (‚àí2.20 to ‚àí1.15), ‚àí3.39 (‚àí3.94 to ‚àí2.82) and ‚àí4.64 (‚àí6.15 to ‚àí3.14) mm¬†Hg systolic BP in adults \\<40, 40 to 60, and \\>60¬†years, respectively.\n\n**Conclusions:** Higher commuting and leisure‚Äêtime but not occupational MVPA were significantly associated with lower BP and lower hypertension risk at all ages, but these associations were stronger in older adults.\n\n# Modeling\n\n## Modeling cars {.smaller}\n\n::: panel-tabset\n## Questions\n\n::: question\n-   What is the relationship between cars' weights and their mileage?\n-   What is your best guess for a car's MPG that weighs 3,500 pounds?\n:::\n\n## Plot\n\n::: {#2ddee61c .cell execution_count=2}\n\n::: {.cell-output .cell-output-display}\n![](15-linear-regression_files/figure-revealjs/cell-3-output-1.png){width=457 height=477}\n:::\n:::\n\n\n:::\n\n## Modelling cars {.smaller}\n\n::: question\n**Describe:** What is the relationship between cars' weights and their mileage?\n:::\n\n::: {#31d1c603 .cell message='false' execution_count=3}\n\n::: {.cell-output .cell-output-display}\n![](15-linear-regression_files/figure-revealjs/cell-4-output-1.png){width=457 height=477}\n:::\n:::\n\n\n## Modelling cars {.smaller}\n\n::: question\n**Predict:** What is your best guess for a car's MPG that weighs 3,500 pounds?\n:::\n\n::: {#e3bcc861 .cell message='false' execution_count=4}\n\n::: {.cell-output .cell-output-display}\n![](15-linear-regression_files/figure-revealjs/cell-5-output-1.png){width=457 height=477}\n:::\n:::\n\n\n## Modelling\n\n-   Use models to explain the relationship between variables and to make predictions\n-   For now we will focus on **linear** models (but there are *many* *many* other types of models too!)\n\n## Modelling vocabulary\n\n-   Predictor (explanatory variable)\n-   Outcome (response variable)\n-   Regression line\n    -   Slope\n    -   Intercept\n-   Correlation\n\n## Predictor (explanatory variable) {.smaller}\n\n::: columns\n::: {.column width=\"25%\"}\n\n::: {#4e258f6a .cell execution_count=5}\n\n::: {.cell-output .cell-output-display execution_count=43}\n```{=html}\n<div id=\"sarmgeoloz\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>\n#sarmgeoloz table {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n        }\n\n#sarmgeoloz thead, tbody, tfoot, tr, td, th { border-style: none; }\n tr { background-color: transparent; }\n#sarmgeoloz p { margin: 0; padding: 0; }\n #sarmgeoloz .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 1; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }\n #sarmgeoloz .gt_caption { padding-top: 4px; padding-bottom: 4px; }\n #sarmgeoloz .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }\n #sarmgeoloz .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }\n #sarmgeoloz .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #sarmgeoloz .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }\n #sarmgeoloz .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #sarmgeoloz .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }\n #sarmgeoloz .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }\n #sarmgeoloz .gt_column_spanner_outer:first-child { padding-left: 0; }\n #sarmgeoloz .gt_column_spanner_outer:last-child { padding-right: 0; }\n #sarmgeoloz .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; }\n #sarmgeoloz .gt_spanner_row { border-bottom-style: hidden; }\n #sarmgeoloz .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; }\n #sarmgeoloz .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; }\n #sarmgeoloz .gt_from_md> :first-child { margin-top: 0; }\n #sarmgeoloz .gt_from_md> :last-child { margin-bottom: 0; }\n #sarmgeoloz .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; }\n #sarmgeoloz .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }\n #sarmgeoloz .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }\n #sarmgeoloz .gt_row_group_first td { border-top-width: 2px; }\n #sarmgeoloz .gt_row_group_first th { border-top-width: 2px; }\n #sarmgeoloz .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }\n #sarmgeoloz .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }\n #sarmgeoloz .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }\n #sarmgeoloz .gt_left { text-align: left; }\n #sarmgeoloz .gt_center { text-align: center; }\n #sarmgeoloz .gt_right { text-align: right; font-variant-numeric: tabular-nums; }\n #sarmgeoloz .gt_font_normal { font-weight: normal; }\n #sarmgeoloz .gt_font_bold { font-weight: bold; }\n #sarmgeoloz .gt_font_italic { font-style: italic; }\n #sarmgeoloz .gt_super { font-size: 65%; }\n #sarmgeoloz .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }\n #sarmgeoloz .gt_asterisk { font-size: 100%; vertical-align: 0; }\n \n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n\n<tr class=\"gt_col_headings\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"mpg\">mpg</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"weight\">weight</th>\n</tr>\n<tbody class=\"gt_table_body\">\n  <tr>\n    <td class=\"gt_row gt_right\">18.0</td>\n    <td style=\"background-color: #E34A6F; color: white;\" class=\"gt_row gt_right\">3504</td>\n  </tr>\n  <tr>\n    <td class=\"gt_row gt_right\">15.0</td>\n    <td style=\"background-color: #E34A6F; color: white;\" class=\"gt_row gt_right\">3693</td>\n  </tr>\n  <tr>\n    <td class=\"gt_row gt_right\">18.0</td>\n    <td style=\"background-color: #E34A6F; color: white;\" class=\"gt_row gt_right\">3436</td>\n  </tr>\n  <tr>\n    <td class=\"gt_row gt_right\">16.0</td>\n    <td style=\"background-color: #E34A6F; color: white;\" class=\"gt_row gt_right\">3433</td>\n  </tr>\n  <tr>\n    <td class=\"gt_row gt_right\">17.0</td>\n    <td style=\"background-color: #E34A6F; color: white;\" class=\"gt_row gt_right\">3449</td>\n  </tr>\n  <tr>\n    <td class=\"gt_row gt_right\">15.0</td>\n    <td style=\"background-color: #E34A6F; color: white;\" class=\"gt_row gt_right\">4341</td>\n  </tr>\n  <tr>\n    <td class=\"gt_row gt_right\">...</td>\n    <td style=\"background-color: #E34A6F; color: white;\" class=\"gt_row gt_right\">...</td>\n  </tr>\n</tbody>\n\n\n</table>\n\n</div>\n        \n```\n:::\n:::\n\n\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"70%\"}\n\n::: {#cf6ef38e .cell execution_count=6}\n\n::: {.cell-output .cell-output-display}\n![](15-linear-regression_files/figure-revealjs/cell-7-output-1.png){width=457 height=477}\n:::\n:::\n\n\n:::\n:::\n\n## Outcome (response variable) {.smaller}\n\n::: columns\n::: {.column width=\"25%\"}\n\n::: {#25c08892 .cell execution_count=7}\n\n::: {.cell-output .cell-output-display execution_count=45}\n```{=html}\n<div id=\"nikshapnco\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>\n#nikshapnco table {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n        }\n\n#nikshapnco thead, tbody, tfoot, tr, td, th { border-style: none; }\n tr { background-color: transparent; }\n#nikshapnco p { margin: 0; padding: 0; }\n #nikshapnco .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 1; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }\n #nikshapnco .gt_caption { padding-top: 4px; padding-bottom: 4px; }\n #nikshapnco .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }\n #nikshapnco .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }\n #nikshapnco .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #nikshapnco .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }\n #nikshapnco .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #nikshapnco .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }\n #nikshapnco .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }\n #nikshapnco .gt_column_spanner_outer:first-child { padding-left: 0; }\n #nikshapnco .gt_column_spanner_outer:last-child { padding-right: 0; }\n #nikshapnco .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; }\n #nikshapnco .gt_spanner_row { border-bottom-style: hidden; }\n #nikshapnco .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; }\n #nikshapnco .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; }\n #nikshapnco .gt_from_md> :first-child { margin-top: 0; }\n #nikshapnco .gt_from_md> :last-child { margin-bottom: 0; }\n #nikshapnco .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; }\n #nikshapnco .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }\n #nikshapnco .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }\n #nikshapnco .gt_row_group_first td { border-top-width: 2px; }\n #nikshapnco .gt_row_group_first th { border-top-width: 2px; }\n #nikshapnco .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }\n #nikshapnco .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }\n #nikshapnco .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }\n #nikshapnco .gt_left { text-align: left; }\n #nikshapnco .gt_center { text-align: center; }\n #nikshapnco .gt_right { text-align: right; font-variant-numeric: tabular-nums; }\n #nikshapnco .gt_font_normal { font-weight: normal; }\n #nikshapnco .gt_font_bold { font-weight: bold; }\n #nikshapnco .gt_font_italic { font-style: italic; }\n #nikshapnco .gt_super { font-size: 65%; }\n #nikshapnco .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }\n #nikshapnco .gt_asterisk { font-size: 100%; vertical-align: 0; }\n \n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n\n<tr class=\"gt_col_headings\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"mpg\">mpg</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"weight\">weight</th>\n</tr>\n<tbody class=\"gt_table_body\">\n  <tr>\n    <td style=\"background-color: #E34A6F; color: white;\" class=\"gt_row gt_right\">18.0</td>\n    <td class=\"gt_row gt_right\">3504</td>\n  </tr>\n  <tr>\n    <td style=\"background-color: #E34A6F; color: white;\" class=\"gt_row gt_right\">15.0</td>\n    <td class=\"gt_row gt_right\">3693</td>\n  </tr>\n  <tr>\n    <td style=\"background-color: #E34A6F; color: white;\" class=\"gt_row gt_right\">18.0</td>\n    <td class=\"gt_row gt_right\">3436</td>\n  </tr>\n  <tr>\n    <td style=\"background-color: #E34A6F; color: white;\" class=\"gt_row gt_right\">16.0</td>\n    <td class=\"gt_row gt_right\">3433</td>\n  </tr>\n  <tr>\n    <td style=\"background-color: #E34A6F; color: white;\" class=\"gt_row gt_right\">17.0</td>\n    <td class=\"gt_row gt_right\">3449</td>\n  </tr>\n  <tr>\n    <td style=\"background-color: #E34A6F; color: white;\" class=\"gt_row gt_right\">15.0</td>\n    <td class=\"gt_row gt_right\">4341</td>\n  </tr>\n  <tr>\n    <td style=\"background-color: #E34A6F; color: white;\" class=\"gt_row gt_right\">...</td>\n    <td class=\"gt_row gt_right\">...</td>\n  </tr>\n</tbody>\n\n\n</table>\n\n</div>\n        \n```\n:::\n:::\n\n\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"70%\"}\n\n::: {#c3ea639a .cell execution_count=8}\n\n::: {.cell-output .cell-output-display}\n![](15-linear-regression_files/figure-revealjs/cell-9-output-1.png){width=457 height=477}\n:::\n:::\n\n\n:::\n:::\n\n## Regression line\n\n::: {#5e523b78 .cell message='false' execution_count=9}\n\n::: {.cell-output .cell-output-display}\n![](15-linear-regression_files/figure-revealjs/cell-10-output-1.png){width=457 height=477}\n:::\n:::\n\n\n## Regression line: slope\n\n::: {#c1f8bdd1 .cell message='false' execution_count=10}\n\n::: {.cell-output .cell-output-display}\n![](15-linear-regression_files/figure-revealjs/cell-11-output-1.png){width=490 height=477}\n:::\n:::\n\n\n## Regression line: intercept\n\n::: {#05464dcf .cell message='false' execution_count=11}\n\n::: {.cell-output .cell-output-display}\n![](15-linear-regression_files/figure-revealjs/cell-12-output-1.png){width=457 height=477}\n:::\n:::\n\n\n## Correlation\n\n::: {#c89dc340 .cell execution_count=12}\n\n::: {.cell-output .cell-output-stdout}\n```\nCorrelation coefficient: -0.83\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](15-linear-regression_files/figure-revealjs/cell-13-output-2.png){width=818 height=536}\n:::\n:::\n\n\n## Correlation\n\n-   Ranges between -1 and 1.\n-   Same sign as the slope.\n\n![](images/corr-example.png){fig-align=\"center\"}\n\n## Visualizing the model\n\n::: {#aecfb535 .cell message='false' execution_count=13}\n``` {.python .cell-code code-fold=\"true\"}\nsns.lmplot(x=\"weight\", y=\"mpg\", data=mtcars, ci=None, scatter_kws={\"s\": 50, \"alpha\": 0.5}, line_kws={\"color\": \"#325b74\"})\nplt.xlabel(\"Weight (1,000 lbs)\")\nplt.ylabel(\"Miles per gallon (MPG)\")\nplt.title(\"MPG vs. weights of cars\")\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](15-linear-regression_files/figure-revealjs/cell-14-output-1.png){width=457 height=477}\n:::\n:::\n\n\n# Linear regression with a single predictor\n\n## Data prep\n\n-   Rename Rotten Tomatoes columns as `critics` and `audience`\n-   Rename the dataset as `movie_scores`\n\n::: {#data-prep .cell execution_count=14}\n``` {.python .cell-code}\nfandango = pd.read_csv(\"data/fandango.csv\")\nmovie_scores = fandango.rename(columns={\"rt_norm\": \"critics\", \"rt_user_norm\": \"audience\"})\n```\n:::\n\n\n## Data overview\n\n::: {#data-overview .cell execution_count=15}\n``` {.python .cell-code}\nprint(movie_scores[[\"critics\", \"audience\"]].head())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   critics  audience\n0     3.70       4.3\n1     4.25       4.0\n2     4.00       4.5\n3     0.90       4.2\n4     0.70       1.4\n```\n:::\n:::\n\n\n## Data visualization\n\n::: {#bb0ccf2d .cell execution_count=16}\n\n::: {.cell-output .cell-output-display}\n![](15-linear-regression_files/figure-revealjs/cell-17-output-1.png){width=823 height=440}\n:::\n:::\n\n\n## Regression model {#regression-model-1}\n\nA **regression model** is a function that describes the relationship between the outcome, $Y$, and the predictor, $X$.\n\n$$\\begin{aligned} Y &= \\color{black}{\\textbf{Model}} + \\text{Error} \\\\[8pt]\n&= \\color{black}{\\mathbf{f(X)}} + \\epsilon \\\\[8pt]\n&= \\color{black}{\\boldsymbol{\\mu_{Y|X}}} + \\epsilon \\end{aligned}$$\n\n## Regression model {.smaller}\n\n::: columns\n::: {.column width=\"30%\"}\n$$\n\\begin{aligned} Y &= \\color{#325b74}{\\textbf{Model}} + \\text{Error} \\\\[8pt]\n&= \\color{#325b74}{\\mathbf{f(X)}} + \\epsilon \\\\[8pt]\n&= \\color{#325b74}{\\boldsymbol{\\mu_{Y|X}}} + \\epsilon \n\\end{aligned}\n$$\n:::\n\n::: {.column width=\"70%\"}\n\n::: {#5d71d908 .cell message='false' execution_count=17}\n\n::: {.cell-output .cell-output-display}\n![](15-linear-regression_files/figure-revealjs/cell-18-output-1.png){width=823 height=440}\n:::\n:::\n\n\n:::\n:::\n\n## Simple linear regression {.smaller}\n\nUse **simple linear regression** to model the relationship between a quantitative outcome ($Y$) and a single quantitative predictor ($X$): $$\\Large{Y = \\beta_0 + \\beta_1 X + \\epsilon}$$\n\n::: incremental\n-   $\\beta_1$: True slope of the relationship between $X$ and $Y$\n-   $\\beta_0$: True intercept of the relationship between $X$ and $Y$\n-   $\\epsilon$: Error (residual)\n:::\n\n## Simple linear regression\n\n$$\\Large{\\hat{Y} = b_0 + b_1 X}$$\n\n-   $b_1$: Estimated slope of the relationship between $X$ and $Y$\n-   $b_0$: Estimated intercept of the relationship between $X$ and $Y$\n-   No error term!\n\n## Residuals\n\n::: {#5d1189d2 .cell message='false' execution_count=18}\n\n::: {.cell-output .cell-output-display}\n![](15-linear-regression_files/figure-revealjs/cell-19-output-1.png){width=823 height=440}\n:::\n:::\n\n\n$$\\text{residual} = \\text{observed} - \\text{predicted} = y - \\hat{y}$$\n\n## Least squares line {.smaller}\n\n-   The residual for the $i^{th}$ observation is\n\n$$e_i = \\text{observed} - \\text{predicted} = y_i - \\hat{y}_i$$\n\n-   The **sum of squared** residuals is\n\n$$e^2_1 + e^2_2 + \\dots + e^2_n$$\n\n-   The **least squares line** is the one that **minimizes the sum of squared residuals**\n\n## Least squares line\n\n::: {#e89f32a7 .cell execution_count=19}\n``` {.python .cell-code}\nslope, intercept = model.coef_[0], model.intercept_\nprint(f\"Slope: {slope:.2f}, Intercept: {intercept:.2f}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nSlope: 0.52, Intercept: 1.62\n```\n:::\n:::\n\n\n# Slope and intercept\n\n## Properties of least squares regression\n\n::: incremental\n-   The regression line goes through the center of mass point (the coordinates corresponding to average $X$ and average $Y$): $b_0 = \\bar{Y} - b_1~\\bar{X}$\n\n-   Slope has the same sign as the correlation coefficient: $b_1 = r \\frac{s_Y}{s_X}$\n\n-   Sum of the residuals is zero: $\\sum_{i = 1}^n \\epsilon_i = 0$\n\n-   Residuals and $X$ values are uncorrelated\n:::\n\n## Interpreting slope & intercept\n\n$$\\widehat{\\text{audience}} = 32.3 + 0.519 \\times \\text{critics}$$\n\n::: incremental\n-   **Slope:** For every one point increase in the critics score, we expect the audience score to be higher by 0.519 points, on average.\n-   **Intercept:** If the critics score is 0 points, we expect the audience score to be 32.3 points.\n:::\n\n## Is the intercept meaningful?\n\n‚úÖ The intercept is meaningful in context of the data if\n\n-   the predictor can feasibly take values equal to or near zero or\n-   the predictor has values near zero in the observed data\n\n. . .\n\nüõë Otherwise, it might not be meaningful!\n\n# Application exercise\n\n## Application exercise: `ae-10-modeling-fish`\n\n::: appex\n-   Go back to your project called `ae`.\n-   If there are any uncommitted files, commit them, and push.\n:::\n\n",
    "supporting": [
      "15-linear-regression_files/figure-revealjs"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}