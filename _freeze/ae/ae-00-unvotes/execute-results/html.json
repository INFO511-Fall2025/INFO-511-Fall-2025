{
  "hash": "74d394686ddb7aed17fa38199caf824a",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: UN Votes\ncategories:\n  - Application exercise\nexecute:\n  warning: false\n  error: false\n---\n\n## Introduction\n\nHow do various countries vote in the United Nations General Assembly, how have their voting patterns evolved throughout time, and how similarly or differently do they view certain issues?\nAnswering these questions (at a high level) is the focus of this analysis.\n\n### Packages\n\nWe will use the **pandas**, **matplotlib**, and **seaborn** packages for data wrangling and visualization.\n\n::: {#load-packages .cell message='false' execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n```\n:::\n\n\n### Data\n\nThe data we're using originally come from the **unvotes** R package.\nIn the chunk below we modify the data by joining the various data frames provided in the package to help you get started with the analysis.\n\n::: {#186184e6 .cell execution_count=2}\n``` {.python .cell-code}\nun_votes = pd.read_csv('data/un_votes.csv')\nun_roll_calls = pd.read_csv('data/un_roll_calls.csv')\nun_roll_call_issues = pd.read_csv('data/un_roll_call_issues.csv')\n\nunvotes = un_votes.merge(un_roll_calls, on='rcid').merge(un_roll_call_issues, on='rcid')\n```\n:::\n\n\n## UN voting patterns\n\nLet's create a data visualization that displays how the voting record of the UK & NI changed over time on a variety of issues and compares it to two other countries: US and Turkey.\n\nWe can easily change which countries are being plotted by changing which countries the code filters for.\nNote that the country name should be spelled and capitalized exactly the same way as it appears in the data.\nSee the [Appendix](#appendix) for a list of the countries in the data.\n\n::: {#cell-plot-yearly-yes-issue .cell message='false' execution_count=3}\n``` {.python .cell-code}\n# Filter the data for the selected countries and prepare for plotting\nfiltered_unvotes = unvotes[unvotes['country'].isin(['United Kingdom', 'United States', 'Turkey'])]\nfiltered_unvotes['year'] = pd.to_datetime(filtered_unvotes['date']).dt.year\n\n# Calculate the percentage of 'yes' votes per year, per country, per issue\npercent_yes = filtered_unvotes.groupby(['country', 'year', 'issue'])['vote'].apply(lambda x: (x == 'yes').mean()).reset_index()\npercent_yes.rename(columns={'vote': 'percent_yes'}, inplace=True)\n\n# Create the faceted plot\ng = sns.FacetGrid(percent_yes, col=\"issue\", hue=\"country\", col_wrap=3)\ng.map(sns.scatterplot, \"year\", \"percent_yes\", alpha=0.4)\ng.map(sns.regplot, \"year\", \"percent_yes\", lowess=True, scatter=False)\n\n# Adjust the labels and titles \ng.set_axis_labels(\"Year\", \"% Yes\")\ng.set_titles(col_template=\"{col_name}\")\ng.add_legend(title=\"Country\")\ng.fig.suptitle(\"Percentage of 'Yes' votes in the UN General Assembly\", y=1.02)\nplt.subplots_adjust(top=0.9)\n\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](ae-00-unvotes_files/figure-html/plot-yearly-yes-issue-output-1.png){#plot-yearly-yes-issue width=1006 height=592}\n:::\n:::\n\n\n## References\n\n1.  David Robinson (2017). [unvotes](https://CRAN.R-project.org/package=unvotes): United Nations General Assembly Voting Data. R package version 0.2.0.\n2.  Erik Voeten \"Data and Analyses of Voting in the UN General Assembly\" Routledge Handbook of International Organization, edited by Bob Reinalda (published May 27, 2013).\n3.  Much of the analysis has been modeled on the examples presented in the [unvotes R package vignette](https://cran.r-project.org/web/packages/unvotes/vignettes/unvotes.html).\n\n## Appendix {#appendix}\n\nBelow is a list of countries in the dataset:\n\n::: {#cell-list-countries .cell execution_count=4}\n\n::: {#list-countries .cell-output .cell-output-display execution_count=4}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>country</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Afghanistan</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Albania</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Algeria</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>Andorra</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>Angola</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>195</th>\n      <td>Yemen People's Republic</td>\n    </tr>\n    <tr>\n      <th>196</th>\n      <td>Yugoslavia</td>\n    </tr>\n    <tr>\n      <th>197</th>\n      <td>Zambia</td>\n    </tr>\n    <tr>\n      <th>198</th>\n      <td>Zanzibar</td>\n    </tr>\n    <tr>\n      <th>199</th>\n      <td>Zimbabwe</td>\n    </tr>\n  </tbody>\n</table>\n<p>200 rows Ã— 1 columns</p>\n</div>\n```\n:::\n:::\n\n\n",
    "supporting": [
      "ae-00-unvotes_files/figure-html"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}